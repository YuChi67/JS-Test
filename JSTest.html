<html>

<head>
    <meta charset="utf-8">
    <title>My test page</title>
</head>

<body>
    <div id="Q1">
        <p>1.Count Employees Number by Factory</p>
        <label style="color: red;">Push button and look here</label>
    </div>
    <button onclick="Question1()">Q1 Answer</button>
    <div id="Q2">
        <p>2. Count Factories Number by Employee</p>
        <label style="color: red;">Push button and look here</label>
    </div>
    <button onclick="Question2()">Q2 Answer</button>
    <div id="Q3">
        <p>3. Order employees list by alphabetical order</p>
        <label style="color: red;">Push button and look here</label>
    </div>
    <button onclick="Question3()">Q3 Answer</button>
    <div id="Q4">
        <p>4. Count total hours worked in 1 day ?</p>
        <label style="color: red;">Push button and look here</label>
    </div>
    <button onclick="Question4()">Q4 Answer</button>
    <div id="Q5">
        <p>5. Make a function that take as parameters dayTime and return number of employee working</p>
        <label style="color: red;">Push button and look here</label>
    </div>
    <button onclick="Question5()">Q5 Answer</button>
    <div id="Q6">
        <p>6. How many days of work needed to done all tasks ?</p>
        <label style="color: red;">Push button and look here</label>
    </div>
    <button onclick="Question6()">Q6 Answer</button>
    <script>
        function Question1() {
            var answer = "";
            const factories =
                [
                    { name: "BR1", employees: ["John", "Alice", "Bob", "Jessie", "Karen"] },
                    { name: "BR2", employees: ["Jessie", "Karen", "John"] },
                    { name: "BR3", employees: ["Miles", "Eric", "Henry", "Bob"] },
                    { name: "BR4", employees: [] }
                ];

            for (var items = 0; items < factories.length; items++) {
                if (items == 0) {
                    answer += "["
                }
                if (items == (factories.length - 1)) {
                    answer += "{name：'" + factories[items].name + "'," + "count：" + factories[items].employees.length + "}]";
                }
                else {
                    answer += "{name：'" + factories[items].name + "'," + "count：" + factories[items].employees.length + "},";
                }

            }

            var x = document.getElementById("Q1");
            x.querySelector("label").innerHTML = answer;
        }
        function Question2() {
            var answer = "";
            var EDs = [];
            var NED = [];
            var count = 0;
            const factories =
                [
                    { name: "BR1", employees: ["John", "Alice", "Bob", "Jessie", "Karen"] },
                    { name: "BR2", employees: ["Jessie", "Karen", "John"] },
                    { name: "BR3", employees: ["Miles", "Eric", "Henry", "Bob"] },
                    { name: "BR4", employees: [] }
                ];
            for (var FD = 0; FD < factories.length; FD++) {
                for (var ED = 0; ED < factories[FD].employees.length; ED++) {
                    EDs[count] = factories[FD].employees[ED];
                    count++;
                }
            }
            NED = EDs.filter((element, index) => EDs.indexOf(element) === index);

            for (var items = 0; items < NED.length; items++) {
                if (items == 0) {
                    answer += "["
                }
                if (items == (NED.length - 1)) {
                    count = 0;
                    for (var num = 0; num < EDs.length; num++) {
                        if (NED[items] == EDs[num]) {
                            count++;
                        }
                    }
                    answer += "{employee：'" + NED[items] + "'," + "count：" + count + "}]";
                }
                else {
                    count = 0;
                    for (var num = 0; num < EDs.length; num++) {
                        if (NED[items] == EDs[num]) {
                            count++;
                        }
                    }
                    answer += "{employee：'" + NED[items] + "'," + "count：" + count + "},";
                }

            }
            var x = document.getElementById("Q2");
            x.querySelector("label").innerHTML = answer;
        }
        function Question3() {
            var answer = "";
            const factories =
                [
                    { name: "BR1", employees: ["John", "Alice", "Bob", "Jessie", "Karen"] },
                    { name: "BR2", employees: ["Jessie", "Karen", "John"] },
                    { name: "BR3", employees: ["Miles", "Eric", "Henry", "Bob"] },
                    { name: "BR4", employees: [] }
                ];
                for (var items = 0; items < factories.length; items++) {
                if (items == 0) {
                    answer += "["
                }
                if (items == (factories.length - 1)) {
                    answer += "{name：'" + factories[items].name + "'," + "order：" + factories[items].employees.sort() + "}]";
                }
                else {
                    answer += "{name：'" + factories[items].name + "'," + "order：" + factories[items].employees.sort() + "},";
                }

            }
            var x = document.getElementById("Q3");
            x.querySelector("label").innerHTML = answer;
        }

        function Question4() {
            var answer = "";
            var NDate = [];
            var total = 0;
            const employeeType = [
                { id: 1, name: "FullTime", work_begin: "09:00:00", work_end: "17:00:00" },
                { id: 2, name: "MidTime", work_begin: "12:00:00", work_end: "21:00:00" },
                { id: 3, name: "HalfTime", work_begin: "20:00:00", work_end: "00:00:00" },
            ];

            const employees = [
                { id: 1, name: "Alice", type: 2 },
                { id: 2, name: "Bob", type: 3 },
                { id: 3, name: "John", type: 2 },
                { id: 4, name: "Karen", type: 1 },
                { id: 5, name: "Miles", type: 3 },
                { id: 6, name: "Henry", type: 1 }
            ];

            const tasks = [
                { id: 1, title: "task01", duration: 60 },
                { id: 2, title: "task02", duration: 120 },
                { id: 3, title: "task03", duration: 180 },
                { id: 4, title: "task04", duration: 360 },
                { id: 5, title: "task05", duration: 30 },
                { id: 6, title: "task06", duration: 220 },
                { id: 7, title: "task07", duration: 640 },
                { id: 8, title: "task08", duration: 250 },
                { id: 9, title: "task09", duration: 119 },
                { id: 10, title: "task10", duration: 560 },
                { id: 11, title: "task11", duration: 340 },
                { id: 12, title: "task12", duration: 45 },
                { id: 13, title: "task13", duration: 86 },
                { id: 14, title: "task14", duration: 480 },
                { id: 15, title: "task15", duration: 900 }
            ];
            for (var items = 0; items < employeeType.length; items++) {
                var begin = Date.parse(employeeType[items].work_begin);
                var work_begin = new Date();
            }
            for (var items = 0; items < employeeType.length; items++) {
                let B = new Date();
                let E = new Date();
                var begin_work = employeeType[items].work_begin.split(":");
                B.setHours(begin_work[0]);
                B.setMinutes(begin_work[1]);
                B.setSeconds(begin_work[2]);
                var end_work = employeeType[items].work_end.split(":");
                E.setHours(end_work[0]);
                E.setMinutes(end_work[1]);
                E.setSeconds(end_work[2]);
                if (employeeType[items].work_end == "00:00:00" || employeeType[items].work_begin == "00:00:00") {
                    E.setDate(E.getDate() + 1);
                }
                if (E.getTime() > B.getTime()) {
                    NDate[items] = E.getTime() - B.getTime();
                }
                else {
                    NDate[items] = B.getTime() - E.getTime();
                }

                var hours = Math.floor(NDate[items] / 1000 / 60 / 60);
                NDate[items] -= hours * 1000 * 60 * 60;
                var minutes = Math.floor(NDate[items] / 1000 / 60);
                NDate[items] = hours;
            }
            for (var items = 0; items < employees.length; items++) {
                var type = employees[items].type - 1;
                total += NDate[type];
            }

            var x = document.getElementById("Q4");
            x.querySelector("label").innerHTML = total;
        }

        function Question5() {
            var answer = "";
            var employee = [];
            const dayTime = [];
            var NDayTime;
            var worktotal = 0;
            var tasktotal = 0;
            var finish;
            const employeeType = [
                { id: 1, name: "FullTime", work_begin: "09:00:00", work_end: "17:00:00" },
                { id: 2, name: "MidTime", work_begin: "12:00:00", work_end: "21:00:00" },
                { id: 3, name: "HalfTime", work_begin: "20:00:00", work_end: "00:00:00" },
            ];

            const employees = [
                { id: 1, name: "Alice", type: 2 },
                { id: 2, name: "Bob", type: 3 },
                { id: 3, name: "John", type: 2 },
                { id: 4, name: "Karen", type: 1 },
                { id: 5, name: "Miles", type: 3 },
                { id: 6, name: "Henry", type: 1 }
            ];

            const tasks = [
                { id: 1, title: "task01", duration: 60 },
                { id: 2, title: "task02", duration: 120 },
                { id: 3, title: "task03", duration: 180 },
                { id: 4, title: "task04", duration: 360 },
                { id: 5, title: "task05", duration: 30 },
                { id: 6, title: "task06", duration: 220 },
                { id: 7, title: "task07", duration: 640 },
                { id: 8, title: "task08", duration: 250 },
                { id: 9, title: "task09", duration: 119 },
                { id: 10, title: "task10", duration: 560 },
                { id: 11, title: "task11", duration: 340 },
                { id: 12, title: "task12", duration: 45 },
                { id: 13, title: "task13", duration: 86 },
                { id: 14, title: "task14", duration: 480 },
                { id: 15, title: "task15", duration: 900 }
            ];
            for (var items = 0; items < employeeType.length; items++) {
                var count = 0;
                NDayTime = "";
                for (var a = 0; a < employees.length; a++) {
                    if (employeeType[items].id == employees[a].type) {
                        employee[count] = employees[a].name;
                        count++;
                    }
                }
                NDayTime += "{id:" + employeeType[items].id + ",name:" + employeeType[items].name + ",work_begin:"
                    + employeeType[items].work_begin + ",word_end:" + employeeType[items].work_end + ",employees:[";
                for (var i = 0; i < employee.length; i++) {
                    if (i == (employee.length - 1)) {
                        NDayTime += employee[i] + "]}";
                    }
                    else {
                        NDayTime += employee[i] + ",";
                    }
                }
                dayTime.push(NDayTime);
            }
            var x = document.getElementById("Q5");
            x.querySelector("label").innerHTML = dayTime;

        }

        function Question6() {
            var answer = "";
            var NDate = [];
            var worktotal = 0;
            var tasktotal = 0;
            var finish = 0;
            const employeeType = [
                { id: 1, name: "FullTime", work_begin: "09:00:00", work_end: "17:00:00" },
                { id: 2, name: "MidTime", work_begin: "12:00:00", work_end: "21:00:00" },
                { id: 3, name: "HalfTime", work_begin: "20:00:00", work_end: "00:00:00" },
            ];

            const employees = [
                { id: 1, name: "Alice", type: 2 },
                { id: 2, name: "Bob", type: 3 },
                { id: 3, name: "John", type: 2 },
                { id: 4, name: "Karen", type: 1 },
                { id: 5, name: "Miles", type: 3 },
                { id: 6, name: "Henry", type: 1 }
            ];

            const tasks = [
                { id: 1, title: "task01", duration: 60 },
                { id: 2, title: "task02", duration: 120 },
                { id: 3, title: "task03", duration: 180 },
                { id: 4, title: "task04", duration: 360 },
                { id: 5, title: "task05", duration: 30 },
                { id: 6, title: "task06", duration: 220 },
                { id: 7, title: "task07", duration: 640 },
                { id: 8, title: "task08", duration: 250 },
                { id: 9, title: "task09", duration: 119 },
                { id: 10, title: "task10", duration: 560 },
                { id: 11, title: "task11", duration: 340 },
                { id: 12, title: "task12", duration: 45 },
                { id: 13, title: "task13", duration: 86 },
                { id: 14, title: "task14", duration: 480 },
                { id: 15, title: "task15", duration: 900 }
            ];
            for (var items = 0; items < employeeType.length; items++) {
                var begin = Date.parse(employeeType[items].work_begin);
                var work_begin = new Date();
            }
            for (var items = 0; items < employeeType.length; items++) {
                let B = new Date();
                let E = new Date();
                var begin_work = employeeType[items].work_begin.split(":");
                B.setHours(begin_work[0]);
                B.setMinutes(begin_work[1]);
                B.setSeconds(begin_work[2]);
                var end_work = employeeType[items].work_end.split(":");
                E.setHours(end_work[0]);
                E.setMinutes(end_work[1]);
                E.setSeconds(end_work[2]);
                if (employeeType[items].work_end == "00:00:00" || employeeType[items].work_begin == "00:00:00") {
                    E.setDate(E.getDate() + 1);
                }
                if (E.getTime() > B.getTime()) {
                    NDate[items] = E.getTime() - B.getTime();
                }
                else {
                    NDate[items] = B.getTime() - E.getTime();
                }

                var hours = Math.floor(NDate[items] / 1000 / 60 / 60);
                NDate[items] -= hours * 1000 * 60 * 60;
                var minutes = Math.floor(NDate[items] / 1000 / 60);
                NDate[items] = hours;
            }
            //worktotal=>hr
            for (var items = 0; items < employees.length; items++) {
                var type = employees[items].type - 1;
                worktotal += NDate[type];
            }
            //tasktotal=>min
            for (var items = 0; items < tasks.length; items++) {
                tasktotal += tasks[items].duration;
            }
            worktotal *= 60;
            finish = Math.ceil(tasktotal / worktotal);
            var x = document.getElementById("Q6");
            x.querySelector("label").innerHTML = finish;
        }
    </script>
</body>

</html>